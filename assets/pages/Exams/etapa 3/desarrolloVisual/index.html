<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../style.css">
    <title> Desarrollo Visual I | segundo parcial</title>
    <style>
                /* Estilos generales */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        .img-extended {
            position: absolute;
            width: 100%;
            top: 0;
            left: 0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }

        /* Tarjeta de examen */
        .card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-bottom: 30px;
        }

        .card-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-text {
            font-size: 0.875rem;
            color: #666;
        }

        .progress-container {
            height: 8px;
            background-color: #eee;
            border-radius: 4px;
            margin-top: 10px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: #18181B;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .card-content {
            padding: 20px;
            /* Añadido para manejar contenido que desborda */
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .question {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 20px;
            /* Añadido para manejar texto largo */
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        /* Opciones de respuesta */
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            /* Añadido para manejar texto largo */
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .option:hover {
            background-color: #f9fafb;
        }

        .option.selected {
            background-color: #eff6ff;
            border-color: #18181B;
        }

        .option input {
            margin-right: 12px;
            flex-shrink: 0;
        }

        .option label {
            cursor: pointer;
            flex: 1;
            /* Añadido para manejar texto largo */
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .card-footer {
            padding: 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
        }

        /* Botones */
        .btn {
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            font-size: 0.875rem;
        }

        .btn-primary {
            background-color: #18181B;
            color: white;
        }

        .btn-primary:hover {
            background-color: #18181B;
        }

        .btn-primary:disabled {
            background-color: #7a7a7c;
            cursor: not-allowed;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid #d1d5db;
            color: #374151;
        }

        .btn-outline:hover {
            background-color: #f9fafb;
        }

        .btn-outline:disabled {
            color: #9ca3af;
            cursor: not-allowed;
        }

        .show-answer {
            
        }

        /* Resultados */
        .results-summary {
            text-align: center;
            margin-bottom: 30px;
        }

        .score {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .percentage {
            font-size: 1.25rem;
            color: #4b5563;
            margin-bottom: 20px;
        }

        .review-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .review-item {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .review-question {
            font-weight: 500;
            margin-bottom: 8px;
            display: flex;
            align-items: flex-start;
            gap: 8px;
            /* Añadido para manejar texto largo */
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .review-answer {
            font-size: 0.875rem;
            color: #4b5563;
            margin-left: 24px;
            /* Añadido para manejar texto largo */
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .correct {
            color: #10b981;
            font-weight: 500;
        }

        .incorrect {
            color: #ef4444;
            font-weight: 500;
        }

        .icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .icon-check {
            color: #10b981;
        }

        .icon-x {
            color: #ef4444;
        }

        .full-width-btn {
            width: 100%;
        }

        img {
            max-width: 100%;
            height: auto;
        }

        #topic {
            margin: 0;
            padding: 0;
            font-size: 1rem;
            text-align: left;
        }

        /* Mejoras para tablas responsivas */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
            overflow-x: auto;
            display: block;
        }

        @media (min-width: 640px) {
            table {
                display: table;
            }
        }

        th, td {
            padding: 8px;
            text-align: left;
            border: 1px solid #ddd;
            word-break: break-word;
        }

        th {
            background-color: #f2f2f2;
        }

        .numbers {
            background-color: #e2dede;
            padding: 2px 5px;
            border-radius: 10px;
            display: inline-block;
            word-break: break-word;
        }
        .volver {
            padding: 15px 20px;
            margin: 20px 10px;
            box-shadow: 0 0 5px black;
            background-color: #18181B;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            border-radius: 10px;
            text-decoration: none;
            color: white;
        }

        ul {
            background-color: #e2e2e2;
            border-radius: 10px;
            font-weight: bold;
            text-align: left;
            width: 70%;
            padding:  5px 20px;
            margin: 0 auto;
            box-shadow: 0 0 8px #b4b4b4 inset;
        }
        li {
            margin-left: 10px;
        }
        /* Responsive */
        @media (max-width: 640px) {
            .card-footer {
                flex-direction: column;
                gap: 12px;
            }
            
            .btn {
                width: 100%;
            }
            
            .card-title {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            
            .review-question {
                flex-direction: column;
            }
            
            .review-answer {
                margin-left: 0;
                margin-top: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Examen segundo parcial</h1>
        <a href="../../../asignaturas/index.html" class="volver">Volver</a>
        <div class="card" id="exam-card">
            <div class="card-header">
                <div class="card-title">
                    <span id="question-number">Pregunta 1 de 5</span>
                    <span class="progress-text" id="progress-text">20% completado</span>
                </div>
                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar" style="width: 20%"></div>
                </div>
            </div>
            
            <div class="card-content">
                <h1 id="topic"></h1>
                <h2 class="question" id="question-text">¿Cuál es la capital de Francia?</h2>
                
                <div class="options" id="options-container">
                    <!-- Las opciones se generarán dinámicamente con JavaScript -->
                </div>
            </div>
            
            <div class="card-footer">
                <button class="btn btn-outline" id="prev-btn" disabled>Anterior</button>
                <button class="btn " id="next-btn" disabled>Siguiente</button>
            </div>
        </div>
        
        <div class="card" id="results-card" style="display: none;">
            <div class="card-header">
                <div class="card-title">Resultados del Examen</div>
                <div>Has completado el examen. Aquí están tus resultados:</div>
            </div>
            
            <div class="card-content">
                <div class="results-summary">
                    <p class="score" id="score">0 / 5</p>
                    <p class="percentage" id="percentage">0% de respuestas correctas</p>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar" id="results-progress-bar" style="width: 0%"></div>
                </div>
                
                <div class="review-section" style="margin-top: 30px;">
                    <h3 class="review-title">Revisión de respuestas:</h3>
                    <div id="review-container">
                        <!-- Los resultados se generarán dinámicamente con JavaScript -->
                    </div>
                </div>
            </div>
            
            
            <div class="card-footer">
                <button class="btn btn-primary full-width-btn" id="restart-btn">Reiniciar Examen</button>
            </div>
        </div>
    </div>
    
    
    <script> // evento extender imagen
    // Estructura de preguntas: [pregunta, respuesta correcta, respuesta incorrecta 1, 2, 3...]
    const preguntas = [
    ["La estructura ______ te permite ejecutar un bloque de código si una condición es verdadera.", "Condicional if", "Bucle for", "Clase abstracta", "Delegado", "Estructuras de control"],
    ["Puedes usar __________ para manejar múltiples condiciones. Esto es útil en aplicaciones de Windows Forms para tomar decisiones basadas en la entrada del usuario o el estado de la aplicación.", "else if y else", "try catch", "for each", "do while", "Estructuras de control"],
    ["Los ____ son esenciales para repetir acciones en tu aplicación.", "Bucles", "Condicionales", "Variables", "Métodos", "Estructuras de control"],
    ["Puedes usar un bucle ___ para recorrer una lista de elementos y realizar una operación en cada uno de ellos.", "for", "if", "switch", "try", "Estructuras de control"],
    ["Los bucles _________ te permiten repetir una acción mientras se cumpla una condición. Esto es útil en Windows Forms para actualizar la interfaz de usuario o procesar datos de manera iterativa.", "While y do-while", "if y else", "foreach y for", "try y catch", "Estructuras de control"],
    ["Permite modificar el flujo de ejecución dentro de un bucle. Por ejemplo, 'break' se utiliza para salir de un bucle antes de que se complete, mientras que 'continue' se usa para omitir la iteración actual y pasar a la siguiente.", "Instrucciones de control de flujo.", "Métodos de clase", "Delegados", "Operadores lógicos", "Estructuras de control"],
    ["¿Cuáles son las ventajas de usar List<T>?", "Flexibilidad dinámica, Métodos útiles, Indexación eficiente", "Memoria estática, Tipos fijos, Sin métodos", "Solo lectura, Inmutabilidad, Sin iteración", "No se puede agregar ni eliminar elementos", "Listas dinámicas"],
    ["Este bucle se suele usar para iterar a través de los elementos de una lista.", "Bucle foreach", "Bucle switch", "Bucle do", "Condicional else", "Listas dinámicas"],
    ["Es una implementación de lista dinámica que proporciona un conjunto de métodos y propiedades para trabajar con listas de elementos.", "List<T>", "Dictionary<TKey, TValue>", "ArrayList", "HashSet", "Listas dinámicas"],
    ["Es el tipo de datos que la lista contendrá. Puede ser cualquier tipo de dato válido en C#, incluyendo tipos de valor y tipos de referencia.", "T", "List", "int[]", "var", "Listas dinámicas"],
    ["Puedes agregar elementos a la lista utilizando el método...", "numeros.Add(1); 'método Add'", "numeros.Insert(1);", "numeros.Join(1);", "numeros.Set(1);", "Listas dinámicas"],
    ["¿Cómo se acceden a los elementos en una lista?", "int primerNumero = numeros[0];", "numeros.get(0);", "numeros.at(0);", "numeros->0;", "Listas dinámicas"],
    ["Esta propiedad devuelve el número de elementos en la lista.", "Propiedad Count", "Propiedad Length", "Propiedad Size", "Propiedad Total", "Listas dinámicas"],
    ["Este método elimina la primera aparición de un elemento específico.", "Método Remove", "Método Delete", "Método Pop", "Método ClearItem", "Listas dinámicas"],
    ["Esta propiedad verifica si un elemento está presente en la lista.", "Método Contains", "Método Exist", "Método HasItem", "Método FindElement", "Listas dinámicas"],
    ["Este método elimina los elementos de una lista.", "Método Clear", "Método Flush", "Método Reset", "Método Wipe", "Listas dinámicas"],
    ["Se utilizan ampliamente para controlar el comportamiento de la interfaz de usuario y la lógica de la aplicación.", "Condicionales", "Bucles infinitos", "Arrays", "Eventos", "Estructuras de control"],
    ["Esta declaración permite ejecutar un bloque de código si una condición especificada es verdadera.", "if", "for", "return", "class", "Estructuras de control"],
    ["Se usa después de un if para comprobar una condición adicional si la condición del if es falsa.", "else if", "switch", "try catch", "foreach", "Estructuras de control"],
    ["Se utiliza para definir un bloque de código que se ejecutará si ninguna de las condiciones anteriores es verdadera.", "else", "default", "finally", "end", "Estructuras de control"],
    ["Este bucle se utiliza cuando se conoce de antemano el número de iteraciones que se deben realizar. Este puede ser utilizado para recorrer los elementos de un arreglo en busca de información específica.", "Bucle for", "Bucle if", "Bucle while", "Bucle try", "Estructuras de control"],
    ["Este bucle se ejecuta mientras se cumple una condición. La condición se evalúa antes de cada iteración, y si es verdadera, se ejecuta el bloque de código del bucle. Este bucle es útil cuando no se conoce de antemano cuántas iteraciones se realizarán, y el bucle continuará hasta que la condición sea falsa.", "Bucle while", "Bucle if", "Bucle for", "Bucle repeat", "Estructuras de control"],
    ["Este bucle es similar al bucle while, pero garantiza que el bloque de código se ejecute al menos una vez antes de evaluar la condición. Esto es útil cuando se necesita realizar una acción inicial antes de verificar si se debe continuar ejecutando el bucle.", "Bucle do-while", "Bucle if", "Bucle until", "Bucle case", "Estructuras de control"],
    ["En el contexto de aplicaciones de Windows Forms, estos bucles se pueden utilizar para tareas como:", "- Recorrer y manipular elementos en controles como listas o cuadros de texto<br>- Animar elementos gráficos en el formulario<br>- Esperar eventos específicos<br>- Procesar datos en segundo plano", "Actualizar eventos en línea", "Conectar con bases de datos", "Crear formularios dinámicos", "Estructuras de control"],
    ["Es una estructura de control que facilita la iteración a través de elementos en una colección, como arrays, listas, diccionarios u otras estructuras de datos que implementan la interfaz IEnumerable.", "foreach", "if", "switch", "case", "Listas dinámicas"],
    ["Sintaxis de foreach", "foreach (var elemento in coleccion) <br>{<br>//código para procesar cada elemento<br>}", "for (int i = 0; i < coleccion.Length; i++)", "switch (elemento)", "while (coleccion.hasNext())", "Listas dinámicas"],
    ["No puedes modificar la colección mientras estás dentro del bucle.", "Solo lectura", "Modificable", "Destrucción segura", "Actualización automática", "Consideraciones importantes del foreach"],
    ["Puedes usar foreach con tus propios tipos personalizados siempre que implementen la interfaz IEnumerable<T>", "Uso con Tipos Personalizados", "Solo para arrays", "Solo para listas nativas", "Solo para strings", "Consideraciones importantes del foreach"],
    ["El rendimiento del bucle foreach es generalmente comparable a otros bucles, pero pueden haber pequeñas diferencias dependiendo del tipo de colección.", "Eficiencia", "Inestabilidad", "Inseguridad", "Baja compatibilidad", "Consideraciones importantes del foreach"],
];


        

        // Variables globales
        let preguntaActual = 0;
        let respuestas = Array(preguntas.length).fill("");
        let opcionesMezcladas = [];

        // Elementos del DOM
        const examCard = document.getElementById('exam-card');
        const resultsCard = document.getElementById('results-card');
        const topic = document.getElementById('topic');
        const questionNumber = document.getElementById('question-number');
        const progressText = document.getElementById('progress-text');
        const progressBar = document.getElementById('progress-bar');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const scoreElement = document.getElementById('score');
        const percentageElement = document.getElementById('percentage');
        const resultsProgressBar = document.getElementById('results-progress-bar');
        const reviewContainer = document.getElementById('review-container');
        const restartBtn = document.getElementById('restart-btn');

        // Inicializar el examen
        function inicializarExamen() {
            // Mezclar las opciones para cada pregunta
            opcionesMezcladas = preguntas.map(pregunta => {
                const opciones = pregunta.slice(1, 5); // Todas las respuestas (correcta e incorrectas)
                return [...opciones].sort(() => Math.random() - 0.5); // Mezclar opciones
            });
            
            mostrarPregunta();
            
            // Event listeners
            prevBtn.addEventListener('click', irPreguntaAnterior);
            nextBtn.addEventListener('click', irPreguntaSiguiente);
            restartBtn.addEventListener('click', reiniciarExamen);
        }

        // Mostrar la pregunta actual
        function mostrarPregunta() {
            // Obtener el tema de la pregunta
            let tema = preguntas[preguntaActual][5];
            if (tema == undefined) {
            }
            else {
                topic.textContent = "Tema: " + tema;
            }
            // Actualizar número de pregunta y progreso
            questionNumber.textContent = `Pregunta ${preguntaActual + 1} de ${preguntas.length}`;
            const progreso = ((preguntaActual + 1) / preguntas.length) * 100; // Formula para sacar porcentaje 
            progressText.textContent = `${Math.round(progreso)}% completado`;
            progressBar.style.width = `${progreso}%`;
            
            // Mostrar texto de la pregunta
            questionText.innerHTML = preguntas[preguntaActual][0];
            
            // Generar opciones
            optionsContainer.innerHTML = '';
            opcionesMezcladas[preguntaActual].forEach((opcion, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = `option ${respuestas[preguntaActual] === opcion ? 'selected' : ''}`;
                optionDiv.dataset.value = opcion;
                
                optionDiv.innerHTML = `
                    <input type="radio" id="option-${index}" name="question-option" 
                           ${respuestas[preguntaActual] === opcion ? 'checked' : ''}>
                    <label for="option-${index}">${opcion}</label>
                `;
                
                optionDiv.addEventListener('click', () => seleccionarOpcion(opcion));
                optionsContainer.appendChild(optionDiv);
            });
            
            // Actualizar estado de los botones
            prevBtn.disabled = preguntaActual === 0;
            nextBtn.disabled = !respuestas[preguntaActual];
            
            if (preguntaActual === preguntas.length - 1) {
                nextBtn.textContent = 'Finalizar';
            } else {
                nextBtn.textContent = 'Siguiente';
            }
        }

        // Seleccionar una opción
        function seleccionarOpcion(opcion) {
            respuestas[preguntaActual] = opcion;
            
            // Actualizar UI
            document.querySelectorAll('.option').forEach(el => {
                el.classList.remove('selected');
                if (el.dataset.value === opcion) {
                    el.classList.add('selected');
                    el.querySelector('input').checked = true;
                }
            });
            
            nextBtn.disabled = false;
        }

        // Ir a la pregunta anterior
        function irPreguntaAnterior() {
            if (preguntaActual > 0) {
                preguntaActual--;
                mostrarPregunta();
            }
        }

        // Ir a la siguiente pregunta
        function irPreguntaSiguiente() {
            if (preguntaActual < preguntas.length - 1) {
                preguntaActual++;
                mostrarPregunta();
            } else {
                mostrarResultados();
            }
        }

        // Mostrar resultados
        function mostrarResultados() {
            examCard.style.display = 'none';
            resultsCard.style.display = 'block';
            
            // Calcular puntuación
            let puntos = 0;
            respuestas.forEach((respuesta, index) => {
                if (respuesta === preguntas[index][1]) {
                    puntos++;
                }
            });
            
            const porcentaje = (puntos / preguntas.length) * 100;
            
            // Actualizar UI
            scoreElement.textContent = `${puntos} / ${preguntas.length}`;
            percentageElement.textContent = `${Math.round(porcentaje)}% de respuestas correctas`;
            resultsProgressBar.style.width = `${porcentaje}%`;
            
            // Generar revisión de respuestas
            reviewContainer.innerHTML = '';
            preguntas.forEach((pregunta, index) => {
                const esCorrecta = respuestas[index] === pregunta[1];
                
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
                
                reviewItem.innerHTML = `
                    <div class="review-question">
                        <span class="icon ${esCorrecta ? 'icon-check' : 'icon-x'}">
                            ${esCorrecta ? '✓' : '✗'}
                        </span>
                        <span>${pregunta[0]}</span>
                    </div>
                    <div class="review-answer">
                        Tu respuesta: <span class="${esCorrecta ? 'correct' : 'incorrect'}">
                            ${respuestas[index] || 'Sin respuesta'}
                        </span>
                    </div>
                    ${!esCorrecta ? `
                        <div class="review-answer">
                            Respuesta correcta: <span class="correct">${pregunta[1]}</span>
                        </div>
                    ` : ''}
                `;
                
                reviewContainer.appendChild(reviewItem);
            });
        }

        // Reiniciar examen
        function reiniciarExamen() {
            preguntaActual = 0;
            respuestas = Array(preguntas.length).fill("");
            
            // Mezclar opciones nuevamente
            opcionesMezcladas = preguntas.map(pregunta => {
                const opciones = pregunta.slice(1);
                return [...opciones].sort(() => Math.random() - 0.5);
            });
            
            // Mostrar tarjeta de examen
            examCard.style.display = 'block';
            resultsCard.style.display = 'none';
            
            mostrarPregunta();
        }

       
        
        // Iniciar el examen cuando cargue la página
        document.addEventListener('DOMContentLoaded', inicializarExamen);
    </script>
</body>
</html>

